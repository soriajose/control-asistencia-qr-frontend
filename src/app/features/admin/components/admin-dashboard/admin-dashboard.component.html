<div class="space-y-8 pb-10">

    <div>
        <h2 class="text-2xl font-bold text-slate-800 mb-4">Resumen del Día</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="bg-white shadow-md hover:shadow-lg transition-shadow rounded-xl p-6 flex items-center border-l-4 border-indigo-500">
                <div class="bg-indigo-50 rounded-full p-3 mr-4">
                    <i class="pi pi-users text-2xl text-indigo-600"></i>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-800">{{ stats().present }}</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Presentes</p>
                </div>
            </div>
            <div class="bg-white shadow-md hover:shadow-lg transition-shadow rounded-xl p-6 flex items-center border-l-4 border-green-500">
                <div class="bg-green-50 rounded-full p-3 mr-4">
                    <i class="pi pi-check-circle text-2xl text-green-600"></i>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-800">{{ stats().onTime }}</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Puntuales</p>
                </div>
            </div>
            <div class="bg-white shadow-md hover:shadow-lg transition-shadow rounded-xl p-6 flex items-center border-l-4 border-orange-500">
                <div class="bg-orange-50 rounded-full p-3 mr-4">
                    <i class="pi pi-clock text-2xl text-orange-600"></i>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-800">{{ stats().late }}</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Llegadas Tarde</p>
                </div>
            </div>
            <div class="bg-white shadow-md hover:shadow-lg transition-shadow rounded-xl p-6 flex items-center border-l-4 border-red-500">
                <div class="bg-red-50 rounded-full p-3 mr-4">
                    <i class="pi pi-user-minus text-2xl text-red-600"></i>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-800">{{ stats().absent }}</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Ausentes</p>
                </div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <div class="lg:col-span-2">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-slate-800">Estado de Empleados en Vivo</h2>
                <span class="text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded">Actualizado ahora</span>
            </div>

            <div class="bg-white shadow-lg rounded-xl overflow-hidden border border-slate-100">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-50 border-b">
                        <tr>
                            <th scope="col" class="px-6 py-4">Empleado</th>
                            <th scope="col" class="px-6 py-4">Estado</th>
                            <th scope="col" class="px-6 py-4">Hora</th>
                        </tr>
                        </thead>
                        <tbody>
                            @for (employee of paginatedEmployees(); track employee.id) {
                                <tr class="bg-white border-b hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">{{ employee.firstName }} {{ employee.lastName }}</div>
                                        <div class="text-xs text-slate-400">{{ employee.email }}</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        @if(employee.status === 'Entrada registrada') {
                                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <span class="w-1.5 h-1.5 rounded-full bg-green-600"></span>
                                                Activo
                                            </span>
                                        } @else {
                                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600">
                                                <span class="w-1.5 h-1.5 rounded-full bg-slate-400"></span>
                                                Ausente / Salida
                                            </span>
                                        }
                                    </td>
                                    <td class="px-6 py-4 font-mono text-slate-600">
                                        @if (employee.status === 'Entrada registrada' && employee.lastClockIn) {
                                            {{ employee.lastClockIn | date:'HH:mm' }} <span class="text-xs text-slate-400">hs</span>
                                        } @else if (employee.lastClockOut) {
                                            {{ employee.lastClockOut | date:'HH:mm' }} <span class="text-xs text-slate-400">hs</span>
                                        } @else {
                                            --:--
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="flex items-center justify-between border-t border-slate-200 bg-white px-4 py-3">
                    <p class="text-xs text-slate-500">
                        Página {{ employeeStatusCurrentPage() }} de {{ employeeStatusTotalPages() }}
                    </p>
                    <div class="flex gap-2">
                        <button (click)="previousEmployeeStatusPage()" [disabled]="employeeStatusCurrentPage() === 1"
                                class="p-1 rounded-md hover:bg-slate-100 disabled:opacity-50">
                            <i class="pi pi-chevron-left text-slate-600"></i>
                        </button>
                        <button (click)="nextEmployeeStatusPage()" [disabled]="employeeStatusCurrentPage() === employeeStatusTotalPages()"
                                class="p-1 rounded-md hover:bg-slate-100 disabled:opacity-50">
                            <i class="pi pi-chevron-right text-slate-600"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="space-y-6">

            <div class="bg-white shadow-lg rounded-xl p-5 border border-red-100">
                <div class="flex items-center gap-2 mb-4">
                    <div class="bg-red-100 p-2 rounded-lg">
                        <i class="pi pi-exclamation-triangle text-red-600"></i>
                    </div>
                    <h3 class="font-bold text-slate-800">Requiere Atención</h3>
                </div>

                @if (alerts().length > 0) {
                    <ul class="space-y-3">
                        @for (alert of alerts(); track $index) {
                            <li class="flex items-start gap-3 text-sm pb-3 border-b border-slate-50 last:border-0 last:pb-0">
                                <i class="pi pi-circle-fill text-[8px] mt-1.5 text-red-400"></i>
                                <div>
                                    <p class="font-medium text-slate-700">{{ alert.message }}</p>
                                    <p class="text-xs text-slate-400">{{ alert.employee }} • {{ alert.date | date:'shortDate' }}</p>
                                </div>
                            </li>
                        }
                    </ul>
                } @else {
                    <div class="text-center py-4 text-slate-400 text-sm">
                        <i class="pi pi-check-circle text-2xl mb-2 text-green-400"></i>
                        <p>Todo en orden hoy.</p>
                    </div>
                }
            </div>

            <div class="bg-white shadow-lg rounded-xl p-5 border border-slate-100">
                <h3 class="font-bold text-slate-800 mb-4">Asistencia Semanal</h3>
                <div class="h-40 flex items-end justify-between gap-2 px-2">
                    <div class="w-full bg-indigo-100 rounded-t-md relative group h-[60%]">
                        <div class="absolute bottom-0 w-full bg-indigo-500 rounded-t-md h-[80%]"></div>
                        <span class="text-[10px] absolute -bottom-5 left-1/2 -translate-x-1/2 text-slate-400">LUN</span>
                    </div>
                    <div class="w-full bg-indigo-100 rounded-t-md relative group h-[70%]">
                        <div class="absolute bottom-0 w-full bg-indigo-500 rounded-t-md h-[90%]"></div>
                        <span class="text-[10px] absolute -bottom-5 left-1/2 -translate-x-1/2 text-slate-400">MAR</span>
                    </div>
                    <div class="w-full bg-indigo-100 rounded-t-md relative group h-[50%]">
                        <div class="absolute bottom-0 w-full bg-indigo-500 rounded-t-md h-[100%]"></div>
                        <span class="text-[10px] absolute -bottom-5 left-1/2 -translate-x-1/2 text-slate-400">MIE</span>
                    </div>
                    <div class="w-full bg-indigo-100 rounded-t-md relative group h-[80%]">
                        <div class="absolute bottom-0 w-full bg-indigo-500 rounded-t-md h-[85%]"></div>
                        <span class="text-[10px] absolute -bottom-5 left-1/2 -translate-x-1/2 text-slate-400">JUE</span>
                    </div>
                    <div class="w-full bg-indigo-100 rounded-t-md relative group h-[65%]">
                        <div class="absolute bottom-0 w-full bg-indigo-500 rounded-t-md h-[70%]"></div>
                        <span class="text-[10px] absolute -bottom-5 left-1/2 -translate-x-1/2 text-slate-400">VIE</span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
